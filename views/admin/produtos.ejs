<%- include('../partials/adminHeader', { titulo: 'Produtos' }) %>

<h1>Gerenciar Produtos</h1>

<form class="form-produto" action="/admin/produtos" method="POST" enctype="multipart/form-data">
  <label for="nome">Nome</label>
  <input type="text" id="nome" name="nome" required>

  <label for="preco">Preço</label>
  <input type="number" id="preco" name="preco" step="0.01" required>

  <label for="categoria">Categoria</label>
  <select id="categoria" name="categoria_id" required>
    <% categorias.forEach(cat => { %>
      <option value="<%= cat.id %>"><%= cat.nome %></option>
    <% }) %>
  </select>

  <label for="imagem">Imagem</label>
  <input type="file" id="imagem" name="imagem" accept="image/*">

  <label for="descricao">Descrição</label>
  <textarea id="descricao" name="descricao"></textarea>

  <button type="submit" class="btn btn-cadastrar">Cadastrar Produto</button>
</form>

<div class="produtos-container">
  <% produtos.forEach(p => { %>
    <div class="produto-card">
      <img src="/uploads/<%= p.imagem %>" alt="<%= p.nome %>">
      <h3><%= p.nome %></h3>
      <p>R$ <%= Number(p.preco).toFixed(2) %></p>
      <div class="card-btns">
        <a href="/admin/produtos/editar/<%= p.id %>" class="btn btn-editar">Editar</a>
        <a href="/admin/produtos/deletar/<%= p.id %>" class="btn btn-deletar">Excluir</a>
      </div>
    </div>
  <% }) %>
</div>

<%- include('../partials/adminFooter') %>
