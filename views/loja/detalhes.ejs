<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title><%= produto.nome %> | Confeitaria</title>
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>

<%- include('../partials/header') %>

  <div class="produto-detalhes">
    <div class="imagem-grande">
      <% if (produto.imagem) { %>
        <img src="/imagens/<%= produto.imagem %>" alt="<%= produto.nome %>" />
      <% } else { %>
        <p>Imagem indisponÃ­vel</p>
      <% } %>
    </div>

    <div class="info">
      <h2><%= produto.nome %></h2>
      <p class="preco">R$ <%= (produto.preco || 0).toFixed(2) %></p>
      <p><%= produto.descricao %></p>

      <form action="/loja/carrinho/adicionar" method="POST">
        <input type="hidden" name="produtoId" value="<%= produto.id %>" />
        <input type="hidden" name="nome" value="<%= produto.nome %>" />
        <input type="hidden" name="preco" value="<%= produto.preco %>" />

        <label>Quantidade:</label>
        <div class="quantidade">
          <button type="button" onclick="alterar(-1)">-</button>
          <input type="number" id="quantidade" name="quantidade" value="1" min="1" />
          <button type="button" onclick="alterar(1)">+</button>
        </div>

        <button type="submit" class="adicionar">Adicionar ao carrinho ðŸ›’</button>
      </form>
    </div>
  </div>
  <%- include('../partials/footer') %>\
  <script>
    function alterar(valor) {
      const input = document.getElementById('quantidade');
      let atual = parseInt(input.value);
      if (!isNaN(atual) && atual + valor >= 1) {
        input.value = atual + valor;
      }
    }
  </script>
</body>
</html>
